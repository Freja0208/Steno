<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>Dit resultat</title>
  <link rel="stylesheet" href="css/podie.css">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

  <section class="midtesec"></section>

<section id="score">
  <h1>ğŸ† Dit resultat</h1>
  <p id="score-display"></p>
</section>

<div class="podium">
  <div class="position">
    <img id="avatar-display" src="css/Avatars/placeholder.png" alt="Din avatar">
    <p>Flot klaret!</p>
  </div>
</div>

<!-- ğŸ”Š Backup-knap -->
<button id="play-sound-btn" style="display:none;">ğŸ”Š Spil fanfare</button>

<!-- Tilbage-knap -->
<button class="Tilbage" onclick="window.location.href='index.html'">Forside</button>

<!-- Lydafspiller -->
<audio id="result-sound">
  <source src="css/klappelyd.mp3" type="audio/mpeg">
  Din browser understÃ¸tter ikke lyd.
</audio>

<script>
  const params = new URLSearchParams(window.location.search);
  const score = parseInt(params.get("score")) || 0;
  const avatar = localStorage.getItem("chosenAvatar") || "css/Avatars/placeholder.png";

  document.getElementById("score-display").innerText = `Din score: ${score} ud af 7`;
  document.getElementById("avatar-display").src = avatar;

  // Automatisk afspilning af lyd
  window.addEventListener("DOMContentLoaded", () => {
    const lyd = document.getElementById("result-sound");
    const knap = document.getElementById("play-sound-btn");

    lyd.play().catch(() => {
      // Hvis afspilning mislykkes (typisk pga. browserregler), vis backup-knap
      knap.style.display = "inline-block";
    });

    // NÃ¥r brugeren klikker backup-knappen, afspil lyden
    knap.addEventListener("click", () => {
      lyd.play();
      knap.style.display = "none";
    });
  });

  window.addEventListener('load', () => {
    confetti({
      particleCount: 150,
      spread: 70,
      origin: { y: 0.6 }
    });
  });
  
  localStorage.removeItem("chosenAvatar");
</script>

</body>
</html>
